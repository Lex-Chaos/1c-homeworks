# Задание к занятию "Временные таблицы и пакетные запросы"

## Задача "Скидки для Реализации"

### Описание задачи

Создать простой механизм подстановки скидки в табличную часть документа Реализация. Сумму рассчитывать с учетом скидки.

### Требования к результату

Прикрепить .dt выгруженной базы с данными.

### Процесс выполнения

1. Создать простой справочник Номенклатурная группа без иерархии.
2. В справочник номенклатура добавить реквизит Номенклатурная группа.
3. Создать документ "Скидки номенклатуры". В шапку вывести дату и номер документа. 
4. Добавить табличную часть документа с реквизитами - Объект - составного типа (Номенклатурная группа, Номенклатура), Процент скидки - тип числовой.
5. Добавить периодический регистр сведений Скидки номенклатуры с измерением Объект (тип как в документе) и ресурсом Процент скидки.
6. Делать движения в регистр при проведении документа Скидки номенклатуры;
7. В табличную часть документа Реализация добавить реквизит Автоматическая скидка.
8. В табличную часть добавить команду Применить скидку. В этом случае реализовать:
    * Если для номенклатуры из табличной части документа, установлена скидка в регистре сведений на дату документа, то заполнять ее в поле 
      Автоматическая скидка и пересчитывать сумму с учетом скидки;
    * Если для номенклатуры не установлена скидка, а установлена для номенклатурной группы то применять скидку для номенклатурной группы. 
      Имеется ввиду значение скидки для реквизита Номенклатурная группа Номенклатуры в табличной части документа;
    * Поиск скидок осуществлять через временные таблицы пакетного запроса с использованием менеджера временных таблиц;  

### Подсказка: [результат выполнения домашнего задания](Examples/homework-6-5-example.md)