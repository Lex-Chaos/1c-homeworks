# Задание к занятию «Виртуальные таблицы регистров сведений»

## Задача 1. «Установка цен»

### Описание задачи
Переделать обработку «Установка цен» с использованием среза последних или функции ПолучитьПоследнее().

### Требования к результату
Выгрузка информационной базы (.dt) с Обработкой УстановкаЦен из [предыдущего задания](https://github.com/netology-code/1c-homeworks/blob/master/homework-4-5.md), в которой получение текущей цены для изменения на процент реализовано через срез последних или функцию ПолучитьПоследнее().

### Процесс выполнения
1. Взять обработку из [предыдущего задания](https://github.com/netology-code/1c-homeworks/blob/master/homework-4-5.md).
2. Установку цен процентом от текущей переписать так, чтобы исходная цена определялась не чтением всех записей, а обращением к срезу последних или к функции ПолучитьПоследнее().

## Задача 2. «Цены на дату»

### Описание задачи

Создать отчёт, выводящий цены номенклатуры на указанную дату.

### Требования к результату

Выгрузка информационной базы (.dt) с Отчётом «Цены на дату», который:
* построен на СКД,
* содержит параметр НаДату с быстрым доступом,
* выводит номенклатуру и цену из среза последних на конец дня указанной даты.

### Процесс выполнения

1. Создать отчёт ЦеныНаДату, в котором:
  * создать основную схему компоновки данных;
  * добавить в неё набор данных — запрос;
  * открыв «Конструктор запроса», добавить виртуальную таблицу «РегистрыСведений.Цены.СрезПоследних» со всеми её полями;
  * чтобы в срез попали и цены, установленные в указанную дату, на закладке «Параметры» для параметра Период указать выражение «КОНЕЦПЕРИОДА(&Период, «День»)»;
  * добавить поле Цена на закладке Ресурсы с функцией Максимум(), выбрав в колонке «Рассчитывать по» расчёт по номенклатуре, но не по иерархии номенклатуры, поскольку цены для группы большого смысла не имеют;
  * на закладке «Настройка», в варианте «Основной», добавить группировку Номенклатура — Иерархия;
  * в «Выбранные поля» перетащить поля Номенклатура и Цена;
  * на закладке «Параметры» в свойствах пользовательских настроек параметра Период поставить флажок «Быстрый доступ», чтобы дата появилась сразу в форме отчёта;
  * проверить отчёт в режиме Предприятия.
